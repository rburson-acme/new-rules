{
    "$ref": "#/definitions/Event",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "definitions": {
        "BooleanInput": {
            "additionalProperties": false,
            "description": "Represents a boolean input model",
            "properties": {
                "display": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "set": {
                    "items": {
                        "additionalProperties": false,
                        "properties": {
                            "display": {
                                "type": "string"
                            },
                            "value": {
                                "type": "boolean"
                            }
                        },
                        "required": [
                            "display",
                            "value"
                        ],
                        "type": "object"
                    },
                    "type": "array"
                },
                "type": {
                    "const": "boolean",
                    "type": "string"
                }
            },
            "required": [
                "name",
                "type",
                "display",
                "set"
            ],
            "type": "object"
        },
        "ElementModel": {
            "additionalProperties": false,
            "description": "An element defines a type of UI Component",
            "properties": {
                "group": {
                    "$ref": "#/definitions/GroupModel",
                    "description": "Represents a group of (sub) elements"
                },
                "image": {
                    "$ref": "#/definitions/ImageModel",
                    "description": "Represents an image"
                },
                "input": {
                    "$ref": "#/definitions/InputModel",
                    "description": "Represents an input value to be supplied by the (UI) user"
                },
                "map": {
                    "$ref": "#/definitions/MapModel",
                    "description": "Represents a map"
                },
                "text": {
                    "$ref": "#/definitions/TextModel",
                    "description": "Represents text content"
                },
                "video": {
                    "$ref": "#/definitions/VideoModel",
                    "description": "Represents a video"
                }
            },
            "type": "object"
        },
        "Event": {
            "additionalProperties": false,
            "description": "Defines the structure of an event",
            "properties": {
                "data": {
                    "$ref": "#/definitions/EventData",
                    "description": "the data envelope for the event"
                },
                "id": {
                    "description": "unique identifier for the event",
                    "type": "string"
                },
                "re": {
                    "description": "optional reference to another event",
                    "type": "string"
                },
                "source": {
                    "additionalProperties": false,
                    "description": "the source of the event",
                    "properties": {
                        "id": {
                            "description": "the unique identifier of the source",
                            "type": "string"
                        },
                        "name": {
                            "description": "A human readable name for the source",
                            "type": "string"
                        },
                        "uri": {
                            "description": "an optional uri representation of the source",
                            "type": "string"
                        }
                    },
                    "required": [
                        "id"
                    ],
                    "type": "object"
                },
                "thredId": {
                    "description": "the thred to which the event belongs if already assigned",
                    "type": "string"
                },
                "time": {
                    "description": "time of event inception",
                    "type": "number"
                },
                "type": {
                    "description": "the fully qualified event type (this should be a 'class' of event) e.g. 'org.wt.tell' this should not be used for application level designations use content specific types like 'valuesType' for application level context",
                    "type": "string"
                }
            },
            "required": [
                "id",
                "type",
                "source"
            ],
            "type": "object"
        },
        "EventContent": {
            "additionalProperties": false,
            "properties": {
                "error": {
                    "additionalProperties": false,
                    "properties": {
                        "cause": {},
                        "code": {
                            "type": "number"
                        },
                        "message": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "message"
                    ],
                    "type": "object"
                },
                "items": {
                    "items": {
                        "$ref": "#/definitions/InlineItem"
                    },
                    "type": "array"
                },
                "resources": {
                    "items": {
                        "$ref": "#/definitions/Resource"
                    },
                    "type": "array"
                },
                "tasks": {
                    "description": "tasks is an array containing tasks and/or arrays of tasks A nested task array represents tasks to be executed in a single transaction",
                    "items": {
                        "anyOf": [
                            {
                                "$ref": "#/definitions/EventTask"
                            },
                            {
                                "items": {
                                    "$ref": "#/definitions/EventTask"
                                },
                                "type": "array"
                            }
                        ]
                    },
                    "type": "array"
                },
                "values": {
                    "anyOf": [
                        {
                            "type": "object"
                        },
                        {
                            "items": {
                                "type": "object"
                            },
                            "type": "array"
                        }
                    ],
                    "description": "the actual values being transferred"
                },
                "valuesType": {
                    "description": "optional application level type of the values. This may be useful to the recipient",
                    "type": "string"
                }
            },
            "type": "object"
        },
        "EventData": {
            "additionalProperties": false,
            "properties": {
                "advice": {
                    "additionalProperties": false,
                    "description": "optionally define what is expected in return",
                    "properties": {
                        "eventType": {
                            "description": "the type of event that is expected",
                            "type": "string"
                        },
                        "template": {
                            "$ref": "#/definitions/TemplateModel",
                            "description": "an interaction template that describes what data to collect"
                        },
                        "title": {
                            "description": "the suggested title of the expected event",
                            "type": "string"
                        }
                    },
                    "required": [
                        "eventType"
                    ],
                    "type": "object"
                },
                "content": {
                    "$ref": "#/definitions/EventContent",
                    "description": "the actual content of the data envelope"
                },
                "description": {
                    "description": "human readable description of the event",
                    "type": "string"
                },
                "display": {
                    "additionalProperties": false,
                    "description": "an optional representation of the event for display",
                    "properties": {
                        "uri": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "uri"
                    ],
                    "type": "object"
                },
                "title": {
                    "description": "human readable title of the event",
                    "type": "string"
                }
            },
            "type": "object"
        },
        "EventTask": {
            "additionalProperties": false,
            "description": "Defines an operation to be performed on an entity (object) or a function call",
            "properties": {
                "name": {
                    "description": "The optional name of the task",
                    "type": "string"
                },
                "op": {
                    "$ref": "#/definitions/Operation",
                    "description": "The type of operation to be performed"
                },
                "options": {
                    "description": "additional options for the task",
                    "type": "object"
                },
                "params": {
                    "$ref": "#/definitions/EventTaskParams",
                    "description": "The parameters for the task"
                }
            },
            "required": [
                "op"
            ],
            "type": "object"
        },
        "EventTaskCollectorParams": {
            "additionalProperties": false,
            "description": "Allows for sorting, limiting, and skipping results",
            "properties": {
                "limit": {
                    "description": "maximum number of results to return",
                    "type": "number"
                },
                "skip": {
                    "description": "number of results to skip",
                    "type": "number"
                },
                "sort": {
                    "description": "sorting criteria as field name and direction",
                    "items": {
                        "additionalProperties": false,
                        "properties": {
                            "desc": {
                                "type": "boolean"
                            },
                            "field": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "field"
                        ],
                        "type": "object"
                    },
                    "type": "array"
                }
            },
            "type": "object"
        },
        "EventTaskParams": {
            "additionalProperties": false,
            "properties": {
                "collector": {
                    "$ref": "#/definitions/EventTaskCollectorParams",
                    "description": "allows for sorting, limiting, skipping"
                },
                "matcher": {
                    "description": "filter for a query",
                    "type": "object"
                },
                "selector": {
                    "additionalProperties": false,
                    "description": "allows for specifying a subset of the return values",
                    "properties": {
                        "exclude": {
                            "items": {
                                "type": "string"
                            },
                            "type": "array"
                        },
                        "include": {
                            "items": {
                                "type": "string"
                            },
                            "type": "array"
                        }
                    },
                    "type": "object"
                },
                "type": {
                    "description": "type of target entity or name of the function",
                    "type": "string"
                },
                "values": {
                    "anyOf": [
                        {
                            "type": "object"
                        },
                        {
                            "items": {},
                            "type": "array"
                        }
                    ],
                    "description": "The values to be used in the operation or the function arguments"
                }
            },
            "required": [
                "type"
            ],
            "type": "object"
        },
        "GroupModel": {
            "additionalProperties": false,
            "description": "Allows for grouping multiple elements",
            "properties": {
                "items": {
                    "description": "The elements in the group",
                    "items": {
                        "$ref": "#/definitions/ElementModel"
                    },
                    "type": "array"
                }
            },
            "required": [
                "items"
            ],
            "type": "object"
        },
        "ImageModel": {
            "additionalProperties": false,
            "description": "Represents an image",
            "properties": {
                "height": {
                    "type": "number"
                },
                "uri": {
                    "type": "string"
                },
                "width": {
                    "type": "number"
                }
            },
            "required": [
                "uri",
                "height",
                "width"
            ],
            "type": "object"
        },
        "InlineItem": {
            "additionalProperties": false,
            "description": "interface for describing an inline item",
            "properties": {
                "content": {
                    "description": "The actual content",
                    "type": "string"
                },
                "contentType": {
                    "description": "The type of the content",
                    "type": "string"
                },
                "encoding": {
                    "description": "The encoding of the content",
                    "type": "string"
                }
            },
            "required": [
                "contentType",
                "encoding",
                "content"
            ],
            "type": "object"
        },
        "InputModel": {
            "anyOf": [
                {
                    "$ref": "#/definitions/BooleanInput"
                },
                {
                    "$ref": "#/definitions/NumericInput"
                },
                {
                    "$ref": "#/definitions/TextInput"
                },
                {
                    "$ref": "#/definitions/NominalInput"
                }
            ]
        },
        "InteractionModel": {
            "additionalProperties": false,
            "description": "A model for facilitating user or machine interaction",
            "properties": {
                "interaction": {
                    "additionalProperties": false,
                    "description": "Describes an interaction",
                    "properties": {
                        "content": {
                            "items": {
                                "$ref": "#/definitions/ElementModel"
                            },
                            "type": "array"
                        }
                    },
                    "required": [
                        "content"
                    ],
                    "type": "object"
                }
            },
            "required": [
                "interaction"
            ],
            "type": "object"
        },
        "MapLocation": {
            "additionalProperties": false,
            "description": "Represents a geographical location on a map.",
            "properties": {
                "display": {
                    "type": "string"
                },
                "latitude": {
                    "type": "string"
                },
                "longitude": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                }
            },
            "required": [
                "name",
                "latitude",
                "longitude"
            ],
            "type": "object"
        },
        "MapModel": {
            "additionalProperties": false,
            "description": "Represents a map",
            "properties": {
                "locations": {
                    "items": {
                        "$ref": "#/definitions/MapLocation"
                    },
                    "type": "array"
                }
            },
            "required": [
                "locations"
            ],
            "type": "object"
        },
        "NominalInput": {
            "additionalProperties": false,
            "description": "Represents a nominal input model",
            "properties": {
                "display": {
                    "type": "string"
                },
                "multiple": {
                    "type": "boolean"
                },
                "name": {
                    "type": "string"
                },
                "set": {
                    "items": {
                        "additionalProperties": false,
                        "properties": {
                            "display": {
                                "type": "string"
                            },
                            "value": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "display",
                            "value"
                        ],
                        "type": "object"
                    },
                    "type": "array"
                },
                "type": {
                    "const": "nominal",
                    "type": "string"
                }
            },
            "required": [
                "name",
                "type",
                "display",
                "set"
            ],
            "type": "object"
        },
        "NumericInput": {
            "additionalProperties": false,
            "description": "Represents a numeric input model",
            "properties": {
                "display": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "type": {
                    "const": "numeric",
                    "type": "string"
                }
            },
            "required": [
                "name",
                "type",
                "display"
            ],
            "type": "object"
        },
        "Operation": {
            "enum": [
                "put",
                "getOne",
                "get",
                "update",
                "upsert",
                "replace",
                "delete",
                "count",
                "run"
            ],
            "type": "string"
        },
        "Resource": {
            "additionalProperties": false,
            "properties": {
                "contentType": {
                    "description": "mimetype/mediatype of the content field",
                    "type": "string"
                },
                "uri": {
                    "description": "Where to find the resource",
                    "type": "string"
                }
            },
            "required": [
                "contentType",
                "uri"
            ],
            "type": "object"
        },
        "TemplateModel": {
            "additionalProperties": false,
            "description": "A TemplateModel describes a user interaction in a UI agnostic way. It is made up of one or more InteractionModels that specify what data should be collected or displayed.",
            "properties": {
                "description": {
                    "description": "A description of the template",
                    "type": "string"
                },
                "interactions": {
                    "description": "The interactions that make up the template",
                    "items": {
                        "$ref": "#/definitions/InteractionModel"
                    },
                    "type": "array"
                },
                "name": {
                    "description": "The name of the template",
                    "type": "string"
                }
            },
            "required": [
                "name",
                "interactions"
            ],
            "type": "object"
        },
        "TextInput": {
            "additionalProperties": false,
            "description": "Represents a text input model",
            "properties": {
                "display": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "type": {
                    "const": "text",
                    "type": "string"
                }
            },
            "required": [
                "name",
                "type",
                "display"
            ],
            "type": "object"
        },
        "TextModel": {
            "additionalProperties": false,
            "description": "Represents text",
            "properties": {
                "value": {
                    "type": "string"
                }
            },
            "required": [
                "value"
            ],
            "type": "object"
        },
        "VideoModel": {
            "additionalProperties": false,
            "description": "Represents a video",
            "properties": {
                "uri": {
                    "type": "string"
                }
            },
            "required": [
                "uri"
            ],
            "type": "object"
        }
    }
}
