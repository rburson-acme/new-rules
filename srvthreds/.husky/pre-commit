
echo "--- Building library dependency before commit checks ---"
npm run build-lib || { echo "Library build failed! Aborting commit."; exit 1; }

echo "--- Library build successful. Staging generated files... ---"
git add ../. || { echo "Failed to stage build output!"; exit 1; }

echo "--- Check for compilation errors with tsc... ---"
npm run check

echo "--- Running pre-commit checks on staged files ---"
npx lint-staged
