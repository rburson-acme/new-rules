#═══════════════════════════════════════════════════════════════════════════════
# Development Environment Configuration
#═══════════════════════════════════════════════════════════════════════════════
# This file provides development-specific overrides for the base config-registry
#
# Purpose: Cloud development environment with minimal resources
# Target: Azure AKS, AWS EKS, or GCP GKE
# Cost optimization: Single replicas, smaller resource limits
#═══════════════════════════════════════════════════════════════════════════════

environment:
  name: dev
  description: "Development environment for testing new features"
  cloud:
    provider: azure  # or aws, gcp
    region: eastus

# Image configuration
images:
  registry: srvthredsdevacr.azurecr.io  # Development ACR
  tag: dev-latest
  pullPolicy: Always

# Service-specific overrides
services:
  engine:
    replicas: 1  # Single instance for dev
    resources:
      memory:
        request: 256Mi
        limit: 512Mi
      cpu:
        request: 200m
        limit: 500m
    environment:
      LOG_LEVEL: debug
      NODE_ENV: development

  session-agent:
    replicas: 1
    resources:
      memory:
        request: 128Mi
        limit: 256Mi
      cpu:
        request: 100m
        limit: 300m
    environment:
      LOG_LEVEL: debug
      NODE_ENV: development

  persistence-agent:
    replicas: 1
    resources:
      memory:
        request: 256Mi
        limit: 512Mi
      cpu:
        request: 200m
        limit: 400m
    environment:
      LOG_LEVEL: debug
      NODE_ENV: development

# Cloud-specific managed services
cloud:
  azure:
    cosmosdb:
      tier: "Standard"
      throughput: 400  # Minimum RU/s for dev
    redis:
      sku: "Basic"
      capacity: 0  # C0 - smallest size
    aks:
      nodeCount: 2
      vmSize: "Standard_B2s"  # Burstable VMs for cost savings
      enableAutoScaling: false

  aws:
    documentdb:
      instanceClass: "db.t3.medium"
      instanceCount: 1
    elasticache:
      nodeType: "cache.t3.micro"
      numCacheNodes: 1
    eks:
      nodeGroupInstanceTypes:
        - "t3.small"
      desiredSize: 2
      minSize: 2
      maxSize: 3

  gcp:
    mongodb:
      tier: "M2"  # Shared cluster
    memorystore:
      tier: "BASIC"
      memorySizeGb: 1
    gke:
      nodeCount: 2
      machineType: "e2-small"
      enableAutoscaling: false

# Monitoring (reduced for cost)
monitoring:
  enabled: true
  prometheus:
    enabled: true
    retention: "7d"
  grafana:
    enabled: false  # Disabled in dev to save resources
  logging:
    retention: "7d"
  tracing:
    enabled: false

# Autoscaling disabled in dev
autoscaling:
  enabled: false

# Backup (reduced schedule)
backup:
  enabled: true
  schedule: "0 3 * * 0"  # Weekly on Sunday at 3 AM
  retention: "7d"
